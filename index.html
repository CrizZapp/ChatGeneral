<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Chat de la Banda ðŸš€</title>

<style>
body{
  margin:0;
  font-family:sans-serif;
  background:#0b141a;
  color:#e9edef;
  height:100vh;
  display:flex;
  flex-direction:column;
}
header{
  background:#202c33;
  padding:12px;
  text-align:center;
  font-weight:bold;
}
#msgs{
  flex:1;
  overflow-y:auto;
  padding:10px;
}
.msg{
  background:#202c33;
  padding:8px 10px;
  margin:6px 0;
  border-radius:10px;
  max-width:80%;
}
.mio{
  background:#005c4b;
  margin-left:auto;
}
footer{
  display:flex;
  gap:6px;
  padding:10px;
  background:#202c33;
}
input{
  flex:1;
  padding:10px;
  border-radius:20px;
  border:none;
  outline:none;
}
button{
  border:none;
  background:#00a884;
  color:white;
  width:40px;
  border-radius:50%;
  font-size:18px;
}
</style>
</head>

<body>

<header>Chat de la Banda ðŸš€</header>

<div id="msgs"></div>

<footer>
  <input id="txt" placeholder="EscribÃ­ algo">
  <button onclick="send()">âž¤</button>
</footer>

<!-- ðŸ”¥ FIREBASE -->
<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
import { getDatabase, ref, push, onChildAdded } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-database.js";

const firebaseConfig = {
  apiKey: "AIzaSyABaTv7yjGsgIu2A6mj6arml2IHGljt_H4",
  authDomain: "ingresa-dfec2.firebaseapp.com",
  databaseURL: "https://ingresa-dfec2-default-rtdb.firebaseio.com",
  projectId: "ingresa-dfec2",
  storageBucket: "ingresa-dfec2.appspot.com",
  messagingSenderId: "441882283200",
  appId: "1:441882283200:web:8067df85facc2d67d77125"
};

const app = initializeApp(firebaseConfig);
const db = getDatabase(app);
const mensajesRef = ref(db, "mensajes");

const nombre = prompt("Tu nombre") || "Anon";
const cont = document.getElementById("msgs");

onChildAdded(mensajesRef, snap => {
  const d = snap.val();
  const div = document.createElement("div");
  div.className = "msg" + (d.user === nombre ? " mio" : "");
  div.innerHTML = "<b>"+d.user+"</b><br>"+d.text;
  cont.appendChild(div);
  cont.scrollTop = cont.scrollHeight;
});

window.send = () => {
  const i = document.getElementById("txt");
  if(!i.value.trim()) return;
  push(mensajesRef, { user: nombre, text: i.value });
  i.value = "";
};
</script>

</body>
</html>
